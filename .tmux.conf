###################################
# .tmux.conf
# tmux configuration file
# Maintainer: Drew Nall <drewnall@gmail.com>
# Last updated: June 10, 2014
###################################



###################################
# Basic Environment Configuration
###################################
##
## Start window and pane index from 1
set -g base-index 1
set-window-option -g pane-base-index 1
##
## Set 256 color terminal
set -g default-terminal "xterm-256color"
#set -g default-terminal "screen-256color"
##
## For pbcopy and pbpaste on OSX
## https://github.com/ChrisJohnsen/tmux-MacOSX-pasteboard
set-option -g default-command "reattach-to-user-namespace -l zsh"
##
## Prompt for confirmation before killing window
bind K confirm-before -p "kill-window #S? (y/n)" kill-window
##
## Rotate panes around window
bind r rotate-window -D
##
## Set window notifications
setw -g monitor-activity on
set -g visual-activity on
##
## Automatically set window title
setw -g automatic-rename on
##
## Allow for faster key repetition
set -g repeat-time 0
##
## Mouse
set -g mode-mouse on
setw -g mouse-select-pane on
setw -g mouse-select-window on
# set -g mouse-resize-pane on
##
## Constrain window size to the max size of any client connected to *that window*
## (as opposed to default: constrain to max size of any client connected to the *session*)
setw -g aggressive-resize on
##
## Increase history limit
set -g history-limit 20000
##
## vi-style controls for copy mode
setw -g mode-keys vi
##
## No escape time for vi mode
set -sg escape-time 0



###################################
# Key Bindings
###################################
##
## Prefix key
unbind C-b
set -g prefix "`"
bind "`" send-prefix
##
## Split
unbind '"'
unbind %
bind | split-window -h
bind _ split-window -v
##
## vim copy selection
unbind [
bind [ copy-mode
unbind p
bind p paste-buffer
bind -t vi-copy 'v' begin-selection
# bind -t vi-copy 'y' copy-selection  # replacing this with copy-pipe, if that works, delete this
bind -t vi-copy Escape cancel
# bind y run "tmux save-buffer - | reattach-to-user-namespace pbcopy" # replacing this with copy-pipe
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"
##
## bind : to command-prompt like vim
## this is the default in tmux already
bind : command-prompt
## vim key map
bind \; command-prompt
##
## move around panes with hjkl, as one would in vim after pressing ctrl-w
bind h select-pane -L
bind l select-pane -R
bind j select-pane -D
bind k select-pane -U
##
## Resize panes with capital vim movement keys, 5 lines at a time
bind H resize-pane -L 5
bind L resize-pane -R 5
bind J resize-pane -D 5
bind K resize-pane -U 5
##
## Don't accidently detach
bind ^D detach-client
##
## Easily toggle synchronization (mnemonic: e is for echo)
## Sends input to all panes in a given window
bind e setw synchronize-panes on
bind E setw synchronize-panes off


###################################
# Appearance
##################################
###
## Copy selection color
setw -g mode-fg black
setw -g mode-bg blue
##
## Alert message line
set -g message-fg white
set -g message-bg brightblack
set -g message-attr bold
##
## Status line
setw -g window-status-activity-fg white
setw -g window-status-activity-bg brightblack
setw -g window-status-activity-attr default
##
## Pane borders
set -g pane-border-fg blue
set -g pane-border-bg black
set -g pane-active-border-fg blue
set -g pane-active-border-bg blue
##
## Make powerline status line look rad
set -g status on
set -g status-utf8 on
set -g status-interval 2
set -g status-left-length 30
set -g status-left "#[fg=colour16,bg=colour254,bold] ❐ #S #[fg=colour254,bg=colour234,nobold]#(eval $POWERLINE_COMMAND tmux left)"
set -g status-right "#[fg=blue,bg=brightblack,nobold]#[fg=white,bg=blue,bold] #(whoami)#[fg=red,bold]@#[fg=white,nobold]#H #[fg=white,bg=blue,nobold]  #[fg=white,bright]%m.%d #[fg=white,bg=blue,nobold]  #[fg=white,bright]%H:%M "
##
##
set -g status-right-length 150
set -g window-status-format "#[fg=colour244,bg=brightblack]#I #[fg=colour240] #[fg=colour249]#W "
set -g window-status-current-format '#[fg=colour234,bg=colour31]#[fg=colour117,bg=colour31,noreverse,bold] #I  #[fg=colour231,bold]#W #[fg=colour31,bg=colour234,nobold]'
##
## --- colors (solarized dark)
## default statusbar colors
set -g status-bg brightblack
set -g status-fg yellow
set -g status-attr default
## default window title colors
setw -g window-status-fg brightblue
## active window title colors
setw -g window-status-current-fg yellow
setw -g window-status-current-bg brightblack
setw -g window-status-current-attr dim
## pane number display
set -g display-panes-active-colour yellow
set -g display-panes-colour brightblue
## clock
setw -g clock-mode-colour yellow
## --- end colors
